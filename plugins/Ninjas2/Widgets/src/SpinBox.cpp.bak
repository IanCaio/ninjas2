#include "SpinBox.hpp"

START_NAMESPACE_DISTRHO

SpinBox::SpinBox(Window &parent, Size<uint> size) noexcept : NanoSpinBox(parent, size)
{
    parent.addIdleCallback(this);
}

SpinBox::SpinBox(NanoWidget *widget, Size<uint> size) noexcept : NanoSpinBox(widget, size)
{    
    widget->getParentWindow().addIdleCallback(this);
}

void SpinBox::draw()
{
    beginPath();

    strokeWidth(1.0f);
    strokeColor(Color(255, 255, 255, 255));
    fillColor(Color(127,127,127,255));

    const float margin = 2.0f;
    const float doubleMargin = margin * 2.0f;
    roundedRect(margin, margin, getWidth() - doubleMargin, getHeight() - doubleMargin, 4.0f);
    fill();
    stroke();
    closePath();
   
    //draw divider
    beginPath();
    moveTo(margin,getHeight()/2);
    lineTo(getWidth()-margin,getHeight()/2);
    stroke();
    closePath();
   
    // draw +
    beginPath();
    strokeColor(Color(0, 0, 0, 255));
    moveTo(getWidth()/2,doubleMargin*2);
    lineTo(getWidth()/2,getHeight()/2 - doubleMargin*2);
    moveTo(doubleMargin*2,(getHeight()-doubleMargin)/4 + 1 );
    lineTo(getWidth()-doubleMargin*2,(getHeight()-doubleMargin)/4 + 1 );
    // draw -
    moveTo(doubleMargin*2,(getHeight()/4)*3);
    lineTo( getWidth()-doubleMargin*2,getHeight()/4*3 );
    stroke();
    closePath();
}

void SpinBox::idleCallback()
{
    //
}

END_NAMESPACE_DISTRHO